contouring algorithm as a state machine





